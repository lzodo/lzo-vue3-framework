import{b as fe,j as u,R as ge,Y as ye,r as n,U as E,o as r,c as L,V as c,W as z,e as l,f as e,w as t,h as p,l as _,C as j,d as T,t as U,F as ve,A as he,S as be,k as we,a1 as ke}from"./main-QT9KUytk.js";import{l as Ce,g as Te,u as Ve,a as Se,d as xe,r as Ie}from"./type-Ci_wKV26.js";import"./index-gHNT2BBc.js";const Ne=[{label:"字典名称",fielId:"dictName"},{label:"字典类型",fielId:"dictType"},{label:"状态",fielId:"status",type:"select",labelFile:"label",valueKey:"value",optionsFielId:"sys_normal_disable"},{label:"创建时间",fielId:"dateRange",type:"date",dateType:"daterange"}],De={class:"app-container"},Re={class:"table-top-handle"},Ue={class:"dialog-footer"},$e=be({name:"Dict"}),Ee=Object.assign($e,{setup(Pe){const A=fe(()=>[...Ne]),{proxy:s}=we();console.log("proxy:",s);const{sys_normal_disable:V}=s.useDict("sys_normal_disable");console.log(V,465789);const $=u([]),f=u(!1),S=u(!0),w=u(!0),x=u([]),P=u(!0),F=u(!0),I=u(0),N=u(""),Q=u([]),K=ge({form:{},queryParams:{pageNum:1,pageSize:10,dictName:void 0,dictType:void 0,status:void 0},rules:{dictName:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],dictType:[{required:!0,message:"字典类型不能为空",trigger:"blur"}]}}),{queryParams:y,form:i,rules:O}=ye(K);function v(){S.value=!0,Ce(s.addDateRange(y.value,Q.value)).then(d=>{$.value=d.rows,I.value=d.total,S.value=!1})}function W(d){}function Y(d){}function G(){f.value=!1,k()}function k(){i.value={dictId:void 0,dictName:void 0,dictType:void 0,status:"0",remark:void 0},s.resetForm("dictRef")}function H(){y.value.pageNum=1,v()}function J(){k(),f.value=!0,N.value="添加字典类型"}function M(d){x.value=d.map(o=>o.dictId),P.value=d.length!=1,F.value=!d.length}function q(d){k();const o=d.dictId||x.value;Te(o).then(D=>{i.value=D.data,f.value=!0,N.value="修改字典类型"})}function X(){s.$refs.dictRef.validate(d=>{d&&(i.value.dictId!=null?Ve(i.value).then(o=>{s.$modal.msgSuccess("修改成功"),f.value=!1,v()}):Se(i.value).then(o=>{s.$modal.msgSuccess("新增成功"),f.value=!1,v()}))})}function B(d){const o=d.dictId||x.value;s.$modal.confirm('是否确认删除字典编号为"'+o+'"的数据项？').then(function(){return xe(o)}).then(()=>{v(),s.$modal.msgSuccess("删除成功")}).catch(()=>{})}function Z(){s.download("system/dict/type/export",{...y.value},`dict_${new Date().getTime()}.xlsx`)}function ee(){Ie().then(()=>{s.$modal.msgSuccess("刷新成功"),ke().cleanDict()})}return v(),(d,o)=>{const D=n("pro-search-header"),te=n("el-header"),m=n("el-button"),b=n("el-col"),ae=n("right-toolbar"),le=n("el-row"),g=n("el-table-column"),oe=n("router-link"),ne=n("dict-tag"),de=n("el-table"),ie=n("el-main"),se=n("pro-pagination"),R=n("el-input"),C=n("el-form-item"),re=n("el-radio"),ue=n("el-radio-group"),ce=n("el-form"),pe=n("el-dialog"),h=E("hasPermi"),me=E("loading");return r(),L("div",De,[c(e(te,{height:"auto"},{default:t(()=>[e(D,{data:l(A),dictData:["sys_normal_disable"],onSearch:H,onReset:k},null,8,["data"])]),_:1},512),[[z,l(w)]]),e(ie,{class:"table-main"},{default:t(()=>[T("div",Re,[e(le,{gutter:10,class:"mb8"},{default:t(()=>[e(b,{span:1.5},{default:t(()=>[c((r(),_(m,{type:"primary",plain:"",icon:"Plus",onClick:J},{default:t(()=>[p("新增")]),_:1})),[[h,["system:dict:add"]]])]),_:1}),e(b,{span:1.5},{default:t(()=>[c((r(),_(m,{type:"success",plain:"",icon:"Edit",disabled:l(P),onClick:q},{default:t(()=>[p("修改")]),_:1},8,["disabled"])),[[h,["system:dict:edit"]]])]),_:1}),e(b,{span:1.5},{default:t(()=>[c((r(),_(m,{type:"danger",plain:"",icon:"Delete",disabled:l(F),onClick:B},{default:t(()=>[p("删除")]),_:1},8,["disabled"])),[[h,["system:dict:remove"]]])]),_:1}),e(b,{span:1.5},{default:t(()=>[c((r(),_(m,{type:"warning",plain:"",icon:"Download",onClick:Z},{default:t(()=>[p("导出")]),_:1})),[[h,["system:dict:export"]]])]),_:1}),e(b,{span:1.5},{default:t(()=>[c((r(),_(m,{type:"danger",plain:"",icon:"Refresh",onClick:ee},{default:t(()=>[p("刷新缓存")]),_:1})),[[h,["system:dict:remove"]]])]),_:1}),e(ae,{showSearch:l(w),"onUpdate:showSearch":o[0]||(o[0]=a=>j(w)?w.value=a:null),onQueryTable:v},null,8,["showSearch"])]),_:1})]),c((r(),_(de,{data:l($),onSelectionChange:M},{default:t(()=>[e(g,{type:"selection",width:"55",align:"center"}),e(g,{label:"字典编号",align:"center",prop:"dictId"}),e(g,{label:"字典名称",align:"center",prop:"dictName","show-overflow-tooltip":!0}),e(g,{label:"字典类型",align:"center","show-overflow-tooltip":!0},{default:t(a=>[e(oe,{to:"/system/dict-data/index/"+a.row.dictId,class:"link-type"},{default:t(()=>[T("span",null,U(a.row.dictType),1)]),_:2},1032,["to"])]),_:1}),e(g,{label:"状态",align:"center",prop:"status"},{default:t(a=>[e(ne,{options:l(V),value:a.row.status},null,8,["options","value"])]),_:1}),e(g,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(g,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:t(a=>[T("span",null,U(d.parseTime(a.row.createTime)),1)]),_:1}),e(g,{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:t(a=>[c((r(),_(m,{link:"",type:"primary",icon:"Edit",onClick:_e=>q(a.row)},{default:t(()=>[p("修改")]),_:2},1032,["onClick"])),[[h,["system:dict:edit"]]]),c((r(),_(m,{link:"",type:"primary",icon:"Delete",onClick:_e=>B(a.row)},{default:t(()=>[p("删除")]),_:2},1032,["onClick"])),[[h,["system:dict:remove"]]])]),_:1})]),_:1},8,["data"])),[[me,l(S)]])]),_:1}),c(e(se,{total:l(I),page:l(y).pageNum,"onUpdate:page":[o[1]||(o[1]=a=>l(y).pageNum=a),W],limit:l(y).pageSize,"onUpdate:limit":[o[2]||(o[2]=a=>l(y).pageSize=a),Y],onPagination:v},null,8,["total","page","limit"]),[[z,l(I)>0]]),e(pe,{title:l(N),modelValue:l(f),"onUpdate:modelValue":o[7]||(o[7]=a=>j(f)?f.value=a:null),width:"500px","append-to-body":""},{footer:t(()=>[T("div",Ue,[e(m,{type:"primary",onClick:X},{default:t(()=>[p("确 定")]),_:1}),e(m,{onClick:G},{default:t(()=>[p("取 消")]),_:1})])]),default:t(()=>[e(ce,{ref:"dictRef",model:l(i),rules:l(O),"label-width":"80px"},{default:t(()=>[e(C,{label:"字典名称",prop:"dictName"},{default:t(()=>[e(R,{modelValue:l(i).dictName,"onUpdate:modelValue":o[3]||(o[3]=a=>l(i).dictName=a),placeholder:"请输入字典名称"},null,8,["modelValue"])]),_:1}),e(C,{label:"字典类型",prop:"dictType"},{default:t(()=>[e(R,{modelValue:l(i).dictType,"onUpdate:modelValue":o[4]||(o[4]=a=>l(i).dictType=a),placeholder:"请输入字典类型"},null,8,["modelValue"])]),_:1}),e(C,{label:"状态",prop:"status"},{default:t(()=>[e(ue,{modelValue:l(i).status,"onUpdate:modelValue":o[5]||(o[5]=a=>l(i).status=a)},{default:t(()=>[(r(!0),L(ve,null,he(l(V),a=>(r(),_(re,{key:a.value,label:a.value},{default:t(()=>[p(U(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"备注",prop:"remark"},{default:t(()=>[e(R,{modelValue:l(i).remark,"onUpdate:modelValue":o[6]||(o[6]=a=>l(i).remark=a),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ee as default};
