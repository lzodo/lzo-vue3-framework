import{k as N}from"./user-QJ3N6Qzj.js";import{j as c,M as v,r as u,o as y,l as C,w as o,e as a,f as l,h as s,k as U}from"./main-QT9KUytk.js";import"./index-gHNT2BBc.js";const j={__name:"userInfo",props:{user:{type:Object}},setup(b){const i=b,{proxy:p}=U(),e=c({}),g=c({nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phonenumber:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]});function V(){p.$refs.userRef.validate(r=>{r&&N(e.value).then(t=>{p.$modal.msgSuccess("修改成功"),i.user.phonenumber=e.value.phonenumber,i.user.email=e.value.email})})}function x(){p.$tab.closePage()}return v(()=>i.user,r=>{r&&(e.value={nickName:r.nickName,phonenumber:r.phonenumber,email:r.email,sex:r.sex})},{immediate:!0}),(r,t)=>{const d=u("el-input"),m=u("el-form-item"),f=u("el-radio"),k=u("el-radio-group"),_=u("el-button"),h=u("el-form");return y(),C(h,{ref:"userRef",model:a(e),rules:a(g),"label-width":"80px"},{default:o(()=>[l(m,{label:"用户昵称",prop:"nickName"},{default:o(()=>[l(d,{modelValue:a(e).nickName,"onUpdate:modelValue":t[0]||(t[0]=n=>a(e).nickName=n),maxlength:"30"},null,8,["modelValue"])]),_:1}),l(m,{label:"手机号码",prop:"phonenumber"},{default:o(()=>[l(d,{modelValue:a(e).phonenumber,"onUpdate:modelValue":t[1]||(t[1]=n=>a(e).phonenumber=n),maxlength:"11"},null,8,["modelValue"])]),_:1}),l(m,{label:"邮箱",prop:"email"},{default:o(()=>[l(d,{modelValue:a(e).email,"onUpdate:modelValue":t[2]||(t[2]=n=>a(e).email=n),maxlength:"50"},null,8,["modelValue"])]),_:1}),l(m,{label:"性别"},{default:o(()=>[l(k,{modelValue:a(e).sex,"onUpdate:modelValue":t[3]||(t[3]=n=>a(e).sex=n)},{default:o(()=>[l(f,{label:"0"},{default:o(()=>[s("男")]),_:1}),l(f,{label:"1"},{default:o(()=>[s("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(m,null,{default:o(()=>[l(_,{type:"primary",onClick:V},{default:o(()=>[s("保存")]),_:1}),l(_,{type:"danger",onClick:x},{default:o(()=>[s("关闭")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}};export{j as default};
