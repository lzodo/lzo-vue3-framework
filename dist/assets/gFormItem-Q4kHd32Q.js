import{_ as T,G as F,H as A,r as u,o as l,c as m,F as s,m as O,l as c,n as D,w as o,I as N,J as K,h as f,t as r,A as j}from"./main-QT9KUytk.js";import"./index-gHNT2BBc.js";const U={name:"gFormItem",components:{},props:{showPlaceholder:{type:Boolean,default:!0},isOnlyView:{type:Boolean},disabled:{type:Boolean},itemData:{type:Object,default:()=>{}},formObj:{type:Object,default:()=>{}},thisObj:{type:Object,default:()=>{}}},data(){return{valueObj:this.formObj||{},defaultArr:[]}},watch:{formObj(t){this.valueObj=t}},computed:{placeholderText(){let t="";switch(this.itemData.type){case"radio":case"checkbox":case"select":case"date":case"cascader":t="请选择";break;case"textarea":case"input":default:t="请输入";break}return this.showPlaceholder?this.itemData.placeholder||t:""}},async created(){},beforeDestroy(){},methods:{isObj:F,viewImageArr(t=[]){return t.reduce((e,h)=>(h&&e.push(F(h)?h[this.itemData.urlField||"fileUrl"]:h),e),[])},getSelectOptions(t={},a={}){return t.options||a[t.optionsFielId]||[]},filterData(t){const a=this.itemData.maxlength||"";if(a){const e=this.$refs.searchSelect.$data.selectedLabel;e.length>a&&(this.$refs.searchSelect.$data.selectedLabel=e.substr(0,a))}},changCascader(t){let a=[];this.$refs.myCascader&&(this.$refs.myCascader.getCheckedNodes()||[]).forEach(h=>{a=a.concat(h.pathLabels||[])}),this.itemData.changeEvent&&this.thisObj[this.itemData.changeEvent]&&this.thisObj[this.itemData.changeEvent](t,a,this.itemData,this.formObj)},changeOption(t,a){this.itemData.changeEvent&&this.thisObj[this.itemData.changeEvent]&&this.thisObj[this.itemData.changeEvent](t,this.itemData,this.formObj,a)},checkNodes(t,a){this.itemData.checkNodesEvent&&this.thisObj[this.itemData.checkNodesEvent]&&this.thisObj[this.itemData.checkNodesEvent](t,a,this.itemData,this.formObj)},computeBirth(t){this.itemData.computeEvent&&this.thisObj[this.itemData.computeEvent]&&this.thisObj[this.itemData.computeEvent](t,this.itemData,this.formObj)},handleInputClick(){const t=this.itemData.clickEvent;t&&this.thisObj[t](this.itemData,this.formObj)},changeDate(t){this.itemData.changeEvent&&this.thisObj[this.itemData.changeEvent]&&this.thisObj[this.itemData.changeEvent](t,this.formObj,this.itemData)},pickerOptions(t,a){return t.pickerOptionsFun&&typeof t.pickerOptionsFun=="function"?t.pickerOptionsFun(t,a):t.pickerOptions||{}},changeNumber(t){this.itemData.changeEvent&&this.thisObj[this.itemData.changeEvent]&&this.thisObj[this.itemData.changeEvent](t,this.itemData,this.formObj)},inputMethods(t){if(this.itemData.type=="thousandInput"||this.itemData.numberLimit){let a=t.split(".")[0];t=t.replace(/[^-\d.]/g,""),t=t.replace(/-{2,}/g,"-"),t=t.replace("-","$#$").replace(/-/g,"").replace("$#$","-"),t=t.replace(/\.{2,}/g,"."),t=t.replace(".","$#$").replace(/\./g,"").replace("$#$","."),this.itemData.precision==1?t=t.replace(/^(-)*(\d+)\.(\d).*$/,"$1$2.$3"):this.itemData.precision?this.itemData.precision==10?t=t.replace(/^(0+)|[^\d]+/g,""):this.itemData.precision==4&&(t=t.replace(/^(-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3")):t=t.replace(/^(-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),t=a.length>1&&a.indexOf("0")==0?Number(t):t,this.valueObj[this.itemData.fielId]=t}this.itemData.inputMethos&&typeof this.itemData.inputMethos=="function"?this.itemData.inputMethos(t,this.valueObj,this.itemData):this.itemData.inputMethosField&&this.thisObj[this.itemData.inputMethosField](t,this.valueObj,this.itemData),this.itemData.changeEvent&&this.thisObj[this.itemData.changeEvent]&&this.thisObj[this.itemData.changeEvent](t,this.itemData,this.formObj)},handleEnterEvent(t){let a=this.valueObj[this.itemData.fielId];this.itemData.enterEvent&&this.thisObj[this.itemData.enterEvent]&&this.thisObj[this.itemData.enterEvent](a,this.itemData,this.formObj),this.$emit("searchFormEnter")},viewData(t,a){const e=t[a.viewField||a.fielId];if(a.optionsFielId){const h=this.thisObj[a.optionsFielId];if(a.multiple&&Array.isArray(e)){if(e.length==0)return"--";{let d=[];return e.map(n=>{const y=h.find(v=>n==v[a.valueKey||"value"]);d.push(y?y[a.labelFile||"name"]:n)}),d.filter(n=>n).join(",")}}if(h&&Array.isArray(h)){const d=h.find(y=>e==y[a.valueKey||"value"]),n=d?d[a.labelFile||"name"]:e;return n=="null"?"--":n||"--"}}else if(Array.isArray(e))return e.join(",");return a.type=="date"&&a.viewDateFormat?A(e,a.viewDateFormat||"YYYY-MM-DD HH:mm:ss"):typeof e=="number"&&!isNaN(e)?e:!e&&a.emptyText?a.emptyText:e||"--"},formateDate(t){let a="yyyy-MM-dd HH:mm:ss";switch(t){case"year":a="yyyy";break;case"month":a="yyyy-MM";break;case"datetime":a="yyyy-MM-dd HH:mm:ss";break;case"monthrange":a="yyyy-MM";break;case"daterange":default:a="yyyy-MM-dd";break}return a},uploadFiles(t,a,e,h,d){this.$emit("uploadFiles",t,e,this.itemData,this.formObj,h,d)},deleteFile(t,a){this.$emit("deleteFile",t,a,this.itemData,this.formObj)},previewFile(t){this.$emit("previewFile",t,this.itemData,this.formObj)},downloadFile(t){this.$emit("downloadFile",t,this.itemData,this.formObj)},getRefComponent(){let t=this.itemData.fielId;return this.$refs[t]}}},B={class:"gform-box"},S={key:2,style:{"white-space":"pre-line"}};function H(t,a,e,h,d,n){const y=u("el-switch"),v=u("el-option"),_=u("el-select"),V=u("el-cascader"),C=u("el-date-picker"),k=u("el-radio"),g=u("el-radio-group"),I=u("el-radio-button"),w=u("el-checkbox"),E=u("el-checkbox-group"),M=u("el-input-number"),x=u("el-input");return l(),m("div",B,[e.isOnlyView?(l(),m(s,{key:0},[e.itemData.type=="upload"?(l(),m(s,{key:0},[],64)):O(t.$slots,"view-content",{key:1},()=>[e.itemData.showViewFun?(l(),m(s,{key:0},[f(r(e.itemData.showViewFun(d.valueObj,e.itemData)),1)],64)):e.itemData.type=="thousandInput"?(l(),m(s,{key:1},[e.itemData.showDollar?(l(),m(s,{key:0},[f(r(n.viewData(d.valueObj,e.itemData)|t.thousandFormat(!0)),1)],64)):(l(),m(s,{key:1},[f(r(n.viewData(d.valueObj,e.itemData)|t.thousandFormat(!1)),1)],64))],64)):e.itemData.type=="textarea"?(l(),m("span",S,r(n.viewData(d.valueObj,e.itemData)||"--"),1)):(l(),m(s,{key:3},[f(r(n.viewData(d.valueObj,e.itemData)||"--"),1)],64))],!0)],64)):(l(),m(s,{key:1},[e.itemData.type=="switch"?(l(),c(y,{key:0,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[0]||(a[0]=i=>d.valueObj[e.itemData.fielId]=i),disabled:e.disabled,class:D(e.itemData.extraClass),"active-color":e.itemData.activeColor,"inactive-color":e.itemData.inactiveColor,"active-text":e.itemData.activeText,"inactive-text":e.itemData.inactiveText,"active-value":e.itemData.activeValue,"inactive-value":e.itemData.inactiveValue},null,8,["modelValue","disabled","class","active-color","inactive-color","active-text","inactive-text","active-value","inactive-value"])):e.itemData.type=="select"?(l(),c(_,{key:1,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[1]||(a[1]=i=>d.valueObj[e.itemData.fielId]=i),placeholder:n.placeholderText,multiple:e.itemData.multiple||!1,class:D(e.itemData.extraClass),"collapse-tags":e.itemData.collapseTags,filterable:"",onChange:n.changeOption,"allow-create":e.itemData.allowCreate||!1,"filter-method":e.thisObj[e.itemData.filterMethod],onInput:n.filterData,readonly:e.itemData.readonly,disabled:e.itemData.disabled||e.disabled,ref:"searchSelect",clearable:""},{default:o(()=>[(l(!0),m(s,null,j(e.itemData.defaultOptions||n.getSelectOptions(e.itemData,e.thisObj),(i,b)=>(l(),m(s,null,[n.isObj(i)?(l(),c(v,{key:b,disabled:i[e.itemData.disabledField||"disabled"],label:i[e.itemData.labelFile||"name"],value:i[e.itemData.valueKey||"value"]},null,8,["disabled","label","value"])):(l(),c(v,{key:b,label:i,value:i},null,8,["label","value"]))],64))),256))]),_:1},8,["modelValue","placeholder","multiple","class","collapse-tags","onChange","allow-create","filter-method","onInput","readonly","disabled"])):e.itemData.type=="cascader"?(l(),c(V,{key:2,ref:"myCascader",class:D(e.itemData.extraClass),options:n.getSelectOptions(e.itemData,e.thisObj)||[],disabled:e.itemData.disabled||e.disabled,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[2]||(a[2]=i=>d.valueObj[e.itemData.fielId]=i),clearable:"",props:e.itemData.propsData||{label:"name",value:"code"},placeholder:n.placeholderText,onChange:n.changCascader},null,8,["class","options","disabled","modelValue","props","placeholder","onChange"])):e.itemData.type=="date"?(l(),c(C,{key:3,clearable:"","start-placeholder":"开始日期","end-placeholder":"结束日期",class:D(e.itemData.extraClass),"popper-class":e.itemData.popperClass,disabled:e.itemData.disabled||e.disabled,format:e.itemData.format,"value-format":e.itemData.dateFormat||n.formateDate(e.itemData.dateType),modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[3]||(a[3]=i=>d.valueObj[e.itemData.fielId]=i),onChange:n.changeDate,"picker-options":n.pickerOptions(e.itemData,d.valueObj),type:e.itemData.dateType,placeholder:n.placeholderText,"unlink-panels":e.itemData.unlinkPanels||!0},null,8,["class","popper-class","disabled","format","value-format","modelValue","onChange","picker-options","type","placeholder","unlink-panels"])):e.itemData.type=="radio"?(l(),c(g,{key:4,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[4]||(a[4]=i=>d.valueObj[e.itemData.fielId]=i),class:D(e.itemData.extraClass),disabled:e.itemData.disabled||e.disabled,onInput:n.changeOption},{default:o(()=>[(l(!0),m(s,null,j(e.itemData.defaultOptions||e.thisObj[e.itemData.optionsFielId]||[],(i,b)=>(l(),m(s,null,[n.isObj(i)?(l(),c(k,{label:i[e.itemData.valueKey||"value"],disabled:i[e.itemData.disabledKey||"disabled"],key:b},{default:o(()=>[f(r(i[e.itemData.labelFile||"name"]),1)]),_:2},1032,["label","disabled"])):(l(),c(k,{label:i,key:b},{default:o(()=>[f(r(i),1)]),_:2},1032,["label"]))],64))),256))]),_:1},8,["modelValue","class","disabled","onInput"])):e.itemData.type=="radiobutton"?(l(),c(g,{key:5,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[5]||(a[5]=i=>d.valueObj[e.itemData.fielId]=i),class:D(e.itemData.extraClass),disabled:e.itemData.disabled||e.disabled,onInput:n.changeOption},{default:o(()=>[(l(!0),m(s,null,j(e.itemData.defaultOptions||e.thisObj[e.itemData.optionsFielId]||[],(i,b)=>(l(),m(s,null,[n.isObj(i)?(l(),c(I,{label:i[e.itemData.valueKey||"value"],disabled:i[e.itemData.disabledKey||"disabled"],key:b},{default:o(()=>[f(r(i[e.itemData.labelFile||"name"]),1)]),_:2},1032,["label","disabled"])):(l(),c(I,{label:i,key:b},{default:o(()=>[f(r(i),1)]),_:2},1032,["label"]))],64))),256))]),_:1},8,["modelValue","class","disabled","onInput"])):e.itemData.type=="checkbox"?(l(),c(E,{key:6,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[6]||(a[6]=i=>d.valueObj[e.itemData.fielId]=i),class:D(e.itemData.extraClass),disabled:e.itemData.disabled||e.disabled},{default:o(()=>[(l(!0),m(s,null,j(e.itemData.defaultOptions||e.thisObj[e.itemData.optionsFielId]||[],(i,b)=>(l(),m(s,null,[n.isObj(i)?(l(),c(w,{class:"111",label:i[e.itemData.valueKey||"value"],key:b},{default:o(()=>[O(t.$slots,"custom-checkbox-label",{optionItem:i,formObj:d.valueObj},()=>[f(r(i[e.itemData.labelFile||"name"]),1)],!0)]),_:2},1032,["label"])):(l(),c(w,{label:i,key:b},{default:o(()=>[O(t.$slots,"custom-checkbox-label",{optionItem:i,formObj:d.valueObj},()=>[f(r(i),1)],!0)]),_:2},1032,["label"]))],64))),256))]),_:3},8,["modelValue","class","disabled"])):e.itemData.type=="upload"?(l(),m(s,{key:7},[],64)):e.itemData.type=="inputNumber"?(l(),c(M,{key:8,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[7]||(a[7]=i=>d.valueObj[e.itemData.fielId]=i),precision:e.itemData.precision,step:e.itemData.step,max:e.itemData.max,min:e.itemData.min,disabled:e.itemData.disabled||e.disabled,readonly:e.itemData.readonly,controls:e.itemData.controls,placeholder:e.itemData.showPlaceholder?n.placeholderText:"",class:D(e.itemData.extraClass),onChange:n.changeNumber},null,8,["modelValue","precision","step","max","min","disabled","readonly","controls","placeholder","class","onChange"])):e.itemData.type=="thousandInput"?(l(),m(s,{key:9},[],64)):e.itemData.type=="selectTree"?(l(),m(s,{key:10},[],64)):(l(),m(s,{key:11},[e.itemData.type=="textarea"?(l(),c(x,{key:0,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[8]||(a[8]=i=>d.valueObj[e.itemData.fielId]=i),type:"textarea",class:D(e.itemData.extraClass),autosize:{minRows:e.itemData.rows||1,maxRows:e.itemData.maxRows||null},rows:e.itemData.rows||1,readonly:e.itemData.readonly,disabled:e.itemData.disabled||e.disabled,maxlength:e.itemData.maxlength||null,placeholder:n.placeholderText,"show-word-limit":e.itemData.showWordLimit},null,8,["modelValue","class","autosize","rows","readonly","disabled","maxlength","placeholder","show-word-limit"])):(l(),c(x,{key:1,clearable:"",ref:e.itemData.fielId,modelValue:d.valueObj[e.itemData.fielId],"onUpdate:modelValue":a[9]||(a[9]=i=>d.valueObj[e.itemData.fielId]=i),modelModifiers:{trim:!0},class:D(e.itemData.extraClass),maxlength:e.itemData.maxlength||null,disabled:e.itemData.disabled||e.disabled,readonly:e.itemData.readonly,type:e.itemData.inputType||"text",onInput:n.inputMethods,onBlur:n.computeBirth,onClick:n.handleInputClick,onKeyup:K(n.handleEnterEvent,["enter","native"]),placeholder:n.placeholderText},N({_:2},[e.itemData.append?{name:"append",fn:o(()=>[O(t.$slots,"custom-append",{},void 0,!0)]),key:"0"}:void 0,e.itemData.prepend?{name:"prepend",fn:o(()=>[O(t.$slots,"custom-prepend",{},void 0,!0)]),key:"1"}:void 0]),1032,["modelValue","class","maxlength","disabled","readonly","type","onInput","onBlur","onClick","onKeyup","placeholder"]))],64))],64))])}const R=T(U,[["render",H],["__scopeId","data-v-b339fa4b"]]);export{R as default};
